/* MediaMatch v.2.0.2 - Testing css media queries in Javascript. Authors & copyright (c) 2013: WebLinc, David Knight. */

window.matchMedia||(window.matchMedia=function(a){"use strict";var b=a.document,c=b.documentElement,d=[],e=0,f="",g={},h=/\s*(only|not)?\s*(screen|print|[a-z\-]+)\s*(and)?\s*/i,i=/^\s*\(\s*(-[a-z]+-)?(min-|max-)?([a-z\-]+)\s*(:?\s*([0-9]+(\.[0-9]+)?|portrait|landscape)(px|em|dppx|dpcm|rem|%|in|cm|mm|ex|pt|pc|\/([0-9]+(\.[0-9]+)?))?)?\s*\)\s*$/,j=0,k=a.styleMedia,l=function(a){if(k&&b.documentMode)return k.matchMedium(a);var c=-1!==a.indexOf(",")&&a.split(",")||[a],d=c.length-1,e=d,j=null,l=null,m="",n=0,o=!1,p="",q="",r=null,s=0,t=0,u=null,v="",w="",x="",y="",z="",A=!1;if(""===a)return!0;do if(j=c[e-d],o=!1,l=j.match(h),l&&(m=l[0],n=l.index),!l||-1===j.substring(0,n).indexOf("(")&&(n||!l[3]&&m!==l.input))A=!1;else{if(q=j,o="not"===l[1],n||(p=l[2],q=j.substring(m.length)),A=p===f||"all"===p||""===p,r=-1!==q.indexOf(" and ")&&q.split(" and ")||[q],s=r.length-1,t=s,A&&s>=0&&""!==q)do{if(u=r[s].match(i),!u||!g[u[3]]){A=!1;break}if(v=u[2],w=u[5],y=w,x=u[7],z=g[u[3]],z=z.call?z():z,x&&(y="px"===x?Number(w):"em"===x||"rem"===x?16*w:u[8]?(w/u[8]).toFixed(2):"dppx"===x?96*w:"dpcm"===x?.3937*w:Number(w)),A="min-"===v&&y?z>=y:"max-"===v&&y?y>=z:y?z===y:!!z,!A)break}while(s--);if(A)break}while(d--);return o?!A:A},m=function(){clearTimeout(j),j=setTimeout(function(){var b=null,c=e-1,f=c,g=!1;if(c>=0)do if(b=d[f-c],b&&(g=l(b.mql.media),g!==b.mql.matches&&(b.mql.matches=g,b.listeners)))for(var h=0,i=b.listeners.length;i>h;h++)b.listeners[h]&&b.listeners[h].call(a,b.mql);while(c--)},10)},n=function(){var d=b.getElementsByTagName("head")[0],e=b.createElement("style"),h=null,i=["screen","print","speech","projection","handheld","tv","braille","embossed","tty"],j=0,k=i.length,l="#mediamatchjs { position: relative; z-index: 0; }",n="",o=a.addEventListener||(n="on")&&a.attachEvent,p=function(){return a.innerWidth||c.clientWidth},q=function(){return a.innerHeight||c.clientHeight},r=a.screen,s=r.width,t=r.height,u=r.colorDepth,v=a.devicePixelRatio;for(g["aspect-ratio"]=function(){return(p()/q()).toFixed(2)},g.orientation=function(){return q()>=p()?"portrait":"landscape"},g.width=p,g.height=q,g["device-width"]=s,g["device-height"]=t,g["device-aspect-ratio"]=(s/t).toFixed(2),g.color=u,g["color-index"]=Math.pow(2,u),g.resolution=v&&96*v||a.screen.deviceXDPI||96,g["device-pixel-ratio"]=v||1,e.type="text/css",e.id="mediamatchjs",d.appendChild(e),h=a.getComputedStyle&&a.getComputedStyle(e)||e.currentStyle;k>j;j++)l+="@media "+i[j]+" { #mediamatchjs { z-index: "+j+" } }";e.styleSheet?e.styleSheet.cssText=l:e.textContent=l,f=i[1*h.zIndex||0],d.removeChild(e),o(n+"resize",m),o(n+"orientationchange",m)};return n(),function(a){var b=e,c={matches:!1,media:a,addListener:function(a){d[b].listeners||(d[b].listeners=[]),a&&d[b].listeners.push(a)},removeListener:function(a){var c=d[b],e=0,f=0;if(c)for(f=c.listeners.length;f>e;e++)c.listeners[e]===a&&c.listeners.splice(e,1)}};return""===a?(c.matches=!0,c):(c.matches=l(a),e=d.push({mql:c,listeners:null}),c)}}(window));